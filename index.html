<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Frankle - The Most Predictable Word Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 3em;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-style: italic;
        }

        .game-board {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 30px;
        }

        .row {
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .tile {
            width: 60px;
            height: 60px;
            border: 2px solid #d3d6da;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            font-weight: bold;
            text-transform: uppercase;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .tile.filled {
            border-color: #878a8c;
            animation: pop 0.1s ease;
        }

        .tile.correct {
            background-color: #6aaa64;
            border-color: #6aaa64;
            color: white;
            animation: flip 0.5s ease;
        }

        .tile.present {
            background-color: #c9b458;
            border-color: #c9b458;
            color: white;
            animation: flip 0.5s ease;
        }

        .tile.absent {
            background-color: #787c7e;
            border-color: #787c7e;
            color: white;
            animation: flip 0.5s ease;
        }

        @keyframes pop {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes flip {
            0% { transform: rotateX(0); }
            50% { transform: rotateX(90deg); }
            100% { transform: rotateX(0); }
        }

        .keyboard {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .keyboard-row {
            display: flex;
            gap: 6px;
            justify-content: center;
        }

        .key {
            background-color: #d3d6da;
            border: none;
            border-radius: 4px;
            padding: 14px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            min-width: 40px;
            transition: all 0.1s ease;
        }

        .key:hover {
            background-color: #bbb;
        }

        .key:active {
            transform: scale(0.95);
        }

        .key.wide {
            min-width: 65px;
            font-size: 12px;
        }

        .key.correct {
            background-color: #6aaa64;
            color: white;
        }

        .key.present {
            background-color: #c9b458;
            color: white;
        }

        .key.absent {
            background-color: #787c7e;
            color: white;
        }

        .message {
            text-align: center;
            margin: 20px 0;
            font-size: 1.2em;
            font-weight: bold;
            min-height: 30px;
            color: #667eea;
        }

        .stats {
            text-align: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #eee;
            color: #666;
        }

        .hint {
            text-align: center;
            color: #999;
            font-size: 0.9em;
            margin-top: 10px;
            font-style: italic;
        }

        .header-controls {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 10px;
        }

        .dark-mode-toggle {
            background: none;
            border: 2px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .dark-mode-toggle:hover {
            background-color: #667eea;
            transform: rotate(180deg);
        }

        .share-button {
            background-color: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.2s ease;
            display: none;
        }

        .share-button:hover {
            background-color: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .share-button:active {
            transform: translateY(0);
        }

        .share-button.visible {
            display: block;
        }

        /* Dark mode styles */
        body.dark-mode {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        }

        body.dark-mode .container {
            background: #0f3460;
            color: #e4e4e4;
        }

        body.dark-mode h1 {
            color: #00d4ff;
        }

        body.dark-mode .subtitle {
            color: #b0b0b0;
        }

        body.dark-mode .tile {
            border-color: #4a5568;
            color: #e4e4e4;
        }

        body.dark-mode .tile.filled {
            border-color: #718096;
        }

        body.dark-mode .key {
            background-color: #4a5568;
            color: #e4e4e4;
        }

        body.dark-mode .key:hover {
            background-color: #5a6578;
        }

        body.dark-mode .message {
            color: #00d4ff;
        }

        body.dark-mode .stats {
            border-top-color: #4a5568;
            color: #b0b0b0;
        }

        body.dark-mode .hint {
            color: #718096;
        }

        body.dark-mode .dark-mode-toggle {
            border-color: #00d4ff;
            color: #00d4ff;
        }

        body.dark-mode .dark-mode-toggle:hover {
            background-color: #00d4ff;
            color: #0f3460;
        }

        body.dark-mode .share-button {
            background-color: #00d4ff;
            color: #0f3460;
        }

        body.dark-mode .share-button:hover {
            background-color: #00b8d9;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header-controls">
            <button type="button" class="dark-mode-toggle" id="darkModeToggle" title="Toggle dark mode">ðŸŒ™</button>
        </div>
        <h1>Frankle</h1>
        <p class="subtitle">It's always Frank. Every single time.</p>
        
        <div class="message" id="message"></div>
        
        <div class="game-board" id="board"></div>
        
        <div class="keyboard" id="keyboard"></div>
        
        <button type="button" class="share-button" id="shareButton">Share Score ðŸ“‹</button>
        
        <div class="hint">Psst... the answer is FRANK ðŸ¤«</div>
        
        <div class="stats">
            <div>Games Played: <span id="gamesPlayed">0</span></div>
            <div>Win Streak: <span id="winStreak">0</span></div>
        </div>
    </div>

    <script>
        const WORD_LENGTH = 5;
        const MAX_GUESSES = 6;
        const ANSWER = 'FRANK';
        
        let currentRow = 0;
        let currentTile = 0;
        let gameOver = false;
        let guesses = [];
        let gamesPlayed = parseInt(localStorage.getItem('frankle_games') || '0');
        let winStreak = parseInt(localStorage.getItem('frankle_streak') || '0');

        const board = document.getElementById('board');
        const keyboard = document.getElementById('keyboard');
        const message = document.getElementById('message');
        const darkModeToggle = document.getElementById('darkModeToggle');
        const shareButton = document.getElementById('shareButton');

        const keyboardLayout = [
            ['Q', 'W', 'E', 'R', 'T', 'Y', 'U', 'I', 'O', 'P'],
            ['A', 'S', 'D', 'F', 'G', 'H', 'J', 'K', 'L'],
            ['ENTER', 'Z', 'X', 'C', 'V', 'B', 'N', 'M', 'BACK']
        ];

        function init() {
            createBoard();
            createKeyboard();
            updateStats();
            initDarkMode();
            document.addEventListener('keydown', handleKeyPress);
            shareButton.addEventListener('click', shareScore);
        }

        function initDarkMode() {
            const darkMode = localStorage.getItem('frankle_darkmode') === 'true';
            if (darkMode) {
                document.body.classList.add('dark-mode');
                darkModeToggle.textContent = 'â˜€ï¸';
            }
            
            darkModeToggle.addEventListener('click', (e) => {
                e.preventDefault();
                document.body.classList.toggle('dark-mode');
                const isDark = document.body.classList.contains('dark-mode');
                darkModeToggle.textContent = isDark ? 'â˜€ï¸' : 'ðŸŒ™';
                localStorage.setItem('frankle_darkmode', isDark);
            });
            
            // Prevent Enter key from triggering the toggle
            darkModeToggle.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    e.stopPropagation();
                }
            });
        }

        function createBoard() {
            for (let i = 0; i < MAX_GUESSES; i++) {
                const row = document.createElement('div');
                row.className = 'row';
                for (let j = 0; j < WORD_LENGTH; j++) {
                    const tile = document.createElement('div');
                    tile.className = 'tile';
                    tile.id = `tile-${i}-${j}`;
                    row.appendChild(tile);
                }
                board.appendChild(row);
            }
        }

        function createKeyboard() {
            keyboardLayout.forEach(row => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'keyboard-row';
                row.forEach(key => {
                    const button = document.createElement('button');
                    button.className = key.length > 1 ? 'key wide' : 'key';
                    button.textContent = key;
                    button.id = `key-${key}`;
                    button.addEventListener('click', () => handleKey(key));
                    rowDiv.appendChild(button);
                });
                keyboard.appendChild(rowDiv);
            });
        }

        function handleKeyPress(e) {
            if (gameOver) return;
            
            const key = e.key.toUpperCase();
            if (key === 'ENTER') {
                handleKey('ENTER');
            } else if (key === 'BACKSPACE') {
                handleKey('BACK');
            } else if (/^[A-Z]$/.test(key)) {
                handleKey(key);
            }
        }

        function handleKey(key) {
            if (gameOver) return;

            if (key === 'ENTER') {
                submitGuess();
            } else if (key === 'BACK') {
                deleteLetter();
            } else {
                addLetter(key);
            }
        }

        function addLetter(letter) {
            if (currentTile < WORD_LENGTH) {
                const tile = document.getElementById(`tile-${currentRow}-${currentTile}`);
                tile.textContent = letter;
                tile.classList.add('filled');
                currentTile++;
            }
        }

        function deleteLetter() {
            if (currentTile > 0) {
                currentTile--;
                const tile = document.getElementById(`tile-${currentRow}-${currentTile}`);
                tile.textContent = '';
                tile.classList.remove('filled');
            }
        }

        function submitGuess() {
            if (currentTile !== WORD_LENGTH) {
                showMessage('Not enough letters');
                return;
            }

            const guess = getCurrentGuess();
            
            // Check tiles
            const letterCount = {};
            for (let char of ANSWER) {
                letterCount[char] = (letterCount[char] || 0) + 1;
            }

            // First pass: mark correct letters
            for (let i = 0; i < WORD_LENGTH; i++) {
                const tile = document.getElementById(`tile-${currentRow}-${i}`);
                const letter = guess[i];
                
                if (letter === ANSWER[i]) {
                    setTimeout(() => {
                        tile.classList.add('correct');
                        updateKeyColor(letter, 'correct');
                    }, i * 300);
                    letterCount[letter]--;
                }
            }

            // Second pass: mark present and absent
            for (let i = 0; i < WORD_LENGTH; i++) {
                const tile = document.getElementById(`tile-${currentRow}-${i}`);
                const letter = guess[i];
                
                if (letter !== ANSWER[i]) {
                    setTimeout(() => {
                        if (letterCount[letter] > 0) {
                            tile.classList.add('present');
                            updateKeyColor(letter, 'present');
                            letterCount[letter]--;
                        } else {
                            tile.classList.add('absent');
                            updateKeyColor(letter, 'absent');
                        }
                    }, i * 300);
                }
            }

            if (guess === ANSWER) {
                setTimeout(() => {
                    gameOver = true;
                    gamesPlayed++;
                    winStreak++;
                    localStorage.setItem('frankle_games', gamesPlayed);
                    localStorage.setItem('frankle_streak', winStreak);
                    updateStats();
                    showMessage('ðŸŽ‰ Of course it was FRANK! ðŸŽ‰');
                    shareButton.classList.add('visible');
                }, WORD_LENGTH * 300 + 500);
            } else {
                currentRow++;
                currentTile = 0;
                
                if (currentRow === MAX_GUESSES) {
                    setTimeout(() => {
                        gameOver = true;
                        gamesPlayed++;
                        winStreak = 0;
                        localStorage.setItem('frankle_games', gamesPlayed);
                        localStorage.setItem('frankle_streak', winStreak);
                        updateStats();
                        showMessage('The answer was... FRANK! (Shocked, right?)');
                        shareButton.classList.add('visible');
                    }, WORD_LENGTH * 300 + 500);
                }
            }
        }

        function shareScore() {
            const guessCount = currentRow + 1; // currentRow is 0-indexed, so add 1
            let scoreText = `Frankle ${guessCount}/${MAX_GUESSES}\n\n`;
            
            // Generate emoji grid - include all rows up to and including the current row
            for (let row = 0; row <= currentRow; row++) {
                for (let col = 0; col < WORD_LENGTH; col++) {
                    const tile = document.getElementById(`tile-${row}-${col}`);
                    if (tile.classList.contains('correct')) {
                        scoreText += 'ðŸŸ©';
                    } else if (tile.classList.contains('present')) {
                        scoreText += 'ðŸŸ¨';
                    } else {
                        scoreText += 'â¬›';
                    }
                }
                scoreText += '\n';
            }
            
            scoreText += '\nIt was FRANK. Again.';
            
            // Try to use the Web Share API, fallback to clipboard
            if (navigator.share) {
                navigator.share({
                    text: scoreText
                }).catch(() => {
                    copyToClipboard(scoreText);
                });
            } else {
                copyToClipboard(scoreText);
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showMessage('Score copied to clipboard!');
            }).catch(() => {
                // Fallback for older browsers
                const textarea = document.createElement('textarea');
                textarea.value = text;
                textarea.style.position = 'fixed';
                textarea.style.opacity = '0';
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                showMessage('Score copied to clipboard!');
            });
        }

        function getCurrentGuess() {
            let guess = '';
            for (let i = 0; i < WORD_LENGTH; i++) {
                const tile = document.getElementById(`tile-${currentRow}-${i}`);
                guess += tile.textContent;
            }
            return guess;
        }

        function updateKeyColor(letter, status) {
            const key = document.getElementById(`key-${letter}`);
            if (!key) return;
            
            const currentStatus = key.classList.contains('correct') ? 'correct' :
                                 key.classList.contains('present') ? 'present' :
                                 key.classList.contains('absent') ? 'absent' : 'none';
            
            if (status === 'correct' || (status === 'present' && currentStatus !== 'correct')) {
                key.classList.remove('correct', 'present', 'absent');
                key.classList.add(status);
            } else if (status === 'absent' && currentStatus === 'none') {
                key.classList.add('absent');
            }
        }

        function showMessage(text) {
            message.textContent = text;
            setTimeout(() => {
                message.textContent = '';
            }, 2000);
        }

        function updateStats() {
            document.getElementById('gamesPlayed').textContent = gamesPlayed;
            document.getElementById('winStreak').textContent = winStreak;
        }

        init();
    </script>
</body>
</html>
